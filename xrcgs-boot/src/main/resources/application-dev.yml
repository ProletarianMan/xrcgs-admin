# 开发环境配置（dev）
spring:
  # 数据源配置
  datasource:
    # 主业务库 JDBC 连接地址（IAM/认证/文件/日志等模块使用）
    url: jdbc:postgresql://localhost:5432/xrcgs_admin
    # 主业务库用户名（可通过环境变量 DB_USER 覆盖）
    username: ${DB_USER:postgres}
    # 主业务库密码（可通过环境变量 DB_PASS 覆盖）
    password: ${DB_PASS:postgres}
    # 主业务库连接池参数
    hikari:
      # 连接池最大连接数
      maximum-pool-size: 10
      # 连接池最小空闲连接数
      minimum-idle: 1
    # PostgreSQL JDBC 驱动类
    driver-class-name: org.postgresql.Driver

    # 路产安全模块独立数据源配置
    road-safety:
      # 路产安全库 JDBC 连接地址
      url: jdbc:postgresql://localhost:5432/xrcgs_roadsafety
      # 路产安全库用户名（默认继承主库用户名）
      username: ${DB_ROAD_SAFETY_USER:${DB_USER:postgres}}
      # 路产安全库密码（默认继承主库密码）
      password: ${DB_ROAD_SAFETY_PASS:${DB_PASS:postgres}}
      # 路产安全库 PostgreSQL JDBC 驱动类
      driver-class-name: org.postgresql.Driver
      # 路产安全库连接池参数
      hikari:
        # 路产安全库连接池最大连接数
        maximum-pool-size: 5
        # 路产安全库连接池最小空闲连接数
        minimum-idle: 1

  # Spring Data 相关配置
  data:
    # Redis 配置
    redis:
      # Redis 服务地址
      host: localhost
      # Redis 服务端口
      port: 6379
      # 使用的 Redis 逻辑库编号
      database: 0
      # Redis 访问密码（可通过环境变量 RD_PASS 覆盖）
      password: ${RD_PASS:root}

# 系统操作日志模块配置
syslog:
  # 是否启用 AOP 操作日志
  enabled: true
  # 请求/响应体记录最大长度（超出会截断）
  maxBodyLength: 2048
  # 是否记录接口响应体
  logResult: true
  # 日志清理任务配置
  cleanup:
    # 是否启用定时清理任务
    enabled: true
    # 日志保留天数
    retention-days: 30
    # 定时清理 Cron 表达式
    cron: 0 30 3 * * ?
    # 单次删除批量大小（0 表示不分批）
    batch-size: 0

# 文件模块配置
file:
  # 文件实际存储根目录
  storage-root: data/uploads
  # 预览/转换文件存放目录
  preview-root: data/preview
  # 单文件最大字节数（1GB）
  max-size: 1073741824
  # 文件预览是否需要鉴权
  preview-auth-required: false

# 文档转换模块配置
convert:
  # 单次转换最大超时时间（毫秒）
  timeout-ms: 300000
  # 转换线程池大小
  pool-size: 2

# LibreOffice 本地转换配置
libreoffice:
  # LibreOffice 安装目录（留空表示自动探测）
  home: ""

# 路产安全业务模块配置
road-safety:
  # 巡查日志导出目录
  inspection-log: data/inspection-logs
  # Excel 导出模板路径
  log-template: /xrcgs-admin/xrcgs-admin/data/template/inspection_record.xlsx
